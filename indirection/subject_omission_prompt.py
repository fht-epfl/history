SYSTEM_PROMPT = """你是一位熟悉朱天心作品中创伤叙事风格的语言分析助手。现在给你一段来自朱天心小说的文字，请你找出其中**语义上省略了主语**的短句，不要数量要质量，这些主语省略应当具有以下特征：

1. **不是口语习惯或语法简略**，而是具有**叙事上的刻意性**；
2. 常出现在**内心独白、梦境描写、感官经验、情感表达、回忆片段**中；
3. 此类省略会让句子的主体变得模糊、疏离、未指明，从而营造出缺席感、疏离感、创伤的文学效果
4. 不是所有省略主语的句子都要返回，**宁缺勿滥**；
5. 上下文可合理补全主语，使句子语义完整。

你的任务是：从输入文本中抽出这些省略主语的语句，并进行如下标註：

---

### 请严格输出以下 JSON 阵列格式，每一笔包含：

- `"original"`：原句，保持原文中省略主语的样貌。
- `"subject"`：被省略的主语（如「我」、「你」、「他」、「她」、「国民党」等）。
- `"filled"`：补出主语后的语义完整句子（仅补主语，不需改写其他部分）。
- `"reason"`：（可选）简要说明主语补出依据，例如上下文指涉、前文人物、情境判断等。

---

请仅输出标註结果的 JSON 阵列，**不要输出其他多余文字或说明**。
"""

EXAMPLE_ONE = """的夜晚，你和Ａ躺在一张木床上，你还记得月光透过窗上的藤花、窗纱、连光带影落在你们身上，前文忘了，只记得自己说：「反正将来我是不结婚的。」Ａ黑里笑起来：「那×××不惨了。」×××是那时正勤写信给你的男校同年级男生，一张大鼻大眼温和的脸浮在你眼前，半天，Ａ说：「不知道同性恋好不好玩。」你没回答，可能白天玩得太疯了，没再来得及交换一句话就沉沉睡去，猫咪打呼一般，两具十七岁年轻的身体。"""
RESPONSE_ONE = """
[
{
"original": "前文忘了",
"filled": "我前文忘了",
"subject": "我",
"reason": "这句话的主语省略了，根据上下文可以推断出是「我」，作用是制造和过去自己的疏离感，暗含与过去割席的心态。"
}
]
"""

EXAMPLE_TWO = """一定是你从无耐心听人说梦、看人写梦，以致失去向自己、向别人说梦的权利和习惯，更仿佛，随身养了一头食梦貘，总在太阳逐渐恢复温暖之际，吃光你所有的梦。"""
RESPONSE_TWO = """
[
{
"original": "随身养了一头食梦貘",
"filled": "你随身养了一头食梦貘",
"subject": "你"
"reason": 此句包含食梦貘的可怕的意象，因此省略「你」（实则为我）以制造疏离感。"
}
]
"""

EXAMPLE_THREE = """就会悚然惊惧，而非你们大多数的热血沸腾当下想到陆皓东黄花岗……，同样十几岁的年纪，她们是如何做到的？以至在日后的启蒙成长和独立自主人格的养成上，省了好大一段冤枉路。二十年后政治正确的写作者也许不难替她们安排一两位二二八受难亲族、或耕者有其田政策下被合法掠夺过家财的、或在牯岭街买到《自由中国》或《大学杂志》并因此启蒙的，不然就有个替康宁祥郭雨"""
RESPONSE_THREE = """
[
{
"original": "以至在日后的启蒙成长和独立自主人格的养成上，省了好大一段冤枉路",
"filled": "以至她们在日后的启蒙成长和独立自主人格的养成上，省了好大一段冤枉路",
"subject": "她们",
"reason": "此句接续前文的「她们」，是作者表达艳羡的对象，某种程度上是一种回避想起她们。"
},
{
"original": "或耕者有其田政策下被合法掠夺过家财的",
"filled": "或耕者有其田政策下被国民党合法掠夺过家财的",
"subject": "国民党",
"reason": "根据上下文可以推断此句省略了掠夺家财的施害者即国民党，这是作者曾经认同但现在却不愿提及的政权，因而是一种言语上的回避。"
}
]
"""

# GENERATION_PROMPT = f"""{text}"""

default = [
    {"role": "user", "content": EXAMPLE_ONE},
    {"role": "assistant", "content": RESPONSE_ONE},
    {"role": "user", "content": EXAMPLE_TWO},
    {"role": "assistant", "content": RESPONSE_TWO},
    {"role": "user", "content": EXAMPLE_THREE},
    {"role": "assistant", "content": RESPONSE_THREE}
]


def prompt_formatter(text):

    prompt = [
        {"role": "system", "content": SYSTEM_PROMPT},
        *default,
        {"role": "user", "content": text},
    ]
    
    return prompt