SYSTEM_PROMPT = """你是一個文學意象識別助手。現在有一段文字輸入，請你找出其中具有意象意涵的**關鍵詞**，並標註其所屬的意象**分類標籤**（精確到預先定義的最低層級類別）。如果某個詞對應多種意象分類，請同時列出所有適用的標籤。

從下列意象中選取：
- 歷史背景
    - 古代中國（例：漢朝、唐朝）
    - 辛亥革命（例：孫中山、武昌起義）
    - 抗日戰爭 （例：盧溝橋、南京大屠殺）
    - 日据時期（例：皇民、總督府、臺北帝國大學）
    - 國共内戰（例：長征、遼西會戰、遷台）
    - 白色恐怖（例：二二八、匪諜、地下電臺）
    - 美麗島事件（例：施明德、美麗島雜志）
    - 解嚴與開放探親（例：回鄉、報禁解除）
- 家庭關係
    - 父親 （例：父親、爸爸）
    - 母親 （例：母親、媽媽）
    - 兄弟姐妹（例：哥哥、姐姐）
    - 祖父母（例：外公、阿嬷）
- 性別意識
    - 男性（例：學長、男孩）
    - 女性（例：紅唇、裙襬）
    - 青春情感（例：暗戀、夢中人）
    - 性與欲望（例：性愛、自慰）
- 語言與族群
    - 本省人（例：臺語、阿嬤、南部腔、擂茶、三伯公）
    - 原住民（例：卑男族、南島）
    - 外省人（例：普通話、大陸來的、上海話）
    - 日本人（例：國語家庭、片假名）
- 政黨
    - 國民黨（例：青天白日、國父、中央社）
    - 民進黨（例：黨外、綠營）
    - 共產黨（例：毛澤東、八路軍）

**要求**：輸出必須是JSON格式的結構化數據。將每個關鍵詞及其標籤作為一個JSON對象，包括：
- `"keyword"`：意象關鍵詞（原文出現的詞語）。
- `"labels"`：該詞的意象分類標籤（列表形式，可包含多個分類）。
- `"reason"`：（可選）簡要說明為何該詞屬於上述分類。

請嚴格按照JSON數組的格式輸出所有標註結果，不要輸出除JSON之外的多餘內容。
"""

EXAMPLE_ONE = """也不願意搭計程車時，聽到司機問：「你要去ㄌㄚˇ（哪）裡？」以及一遇塞車就痛罵國民黨和民進黨的，你望著他後腦勺的幾根白髮，當下可斷定他是那批氣宇軒昂意氣洋洋、專修班出來還自願留營以盡忠報國，而後中年退伍不知如何轉業的×家×哥……"""
RESPONSE_ONE = """
[
{
"keyword": "國民黨",
"labels": ["政黨-國民黨"],
"reason": "提到了「國民黨」，它是臺灣的主要政黨之一。司機逢塞車就痛罵國民黨，顯示對執政黨不滿，故標註為政黨相關。"
},
{
"keyword": "民進黨",
"labels": ["政黨-民進黨"],
"reason": "與「國民黨」並列出現的「民進黨」是另一主要政黨。司機把怨氣發洩到民進黨，這明確涉及政治政黨話題，因此標記為政黨。"
}
]
"""

EXAMPLE_TWO = """若是大陸來的媽媽，會在差不多來臺灣的第十年，變賣盡最後一樣金飾後，在那一年的農曆新年一橫心，把箱底旗袍或襖子拿出來改給眾小孩當新衣，無須丈夫們解說該年九月的雷震事件，或是進一步地洩露軍機，她們比什麼人都早地已與朝中主事者一樣自知回不去了。"""
RESPONSE_TWO = """
[
{
"keyword": "大陸來的媽媽",
"labels": ["家庭關係-母親", "語言與族群-外省人"],
"reason": "這裡的「大陸來的媽媽」是指從中國大陸隨軍遷台的母親形象。她既是孩子們的母親（家庭關係），又具有外省背景（語言族群），因此同時標記母親和外省人。"
},
{
"keyword": "雷震事件",
"labels": ["歷史背景-白色恐怖"],
"reason": "提及「該年九月的雷震事件」，雷震事件是臺灣威權時期的重要政治案件，屬於白色恐怖年代的典型事件，代表當時政治高壓統治背景，故將其標註為白色恐怖。"
}
]
"""

EXAMPLE_THREE = """很自然地被那些比起你的眷村愛人顯得土土的、保守沉默的本省男孩所吸引，儘管他們之中也多有家境比眷村生活還要窘困，或比眷村男孩的動輒放眼中國、放眼世界的四海之志要顯得胸無大志得多，但他們的安穩怡然以及諸多出乎你意料的對事情的看法，都使得你窒悶的生活得以開了一扇窗，透了口氣。我深深同情你們在人群中乍聞一聲外省腔的「他媽的」時所頓生的鄉愁……"""
RESPONSE_THREE = """
[
{
"keyword": "本省男孩",
"labels": ["語言與族群-本省人", "性別意識-男性"],
"reason": "「本省男孩」指的是本地臺灣籍的男青年。一方面突出了他的本省人身份（語言族群），另一方面強調其性別為男性（性別意識），因此為該詞標記本省人和男性兩種標籤。"
},
{
"keyword": "眷村男孩",
"labels": ["語言與族群-外省人", "性別意識-男性"],
"reason": "「外省男孩」指的是本地臺灣籍的男青年。一方面突出了他的外省人身份（語言族群），另一方面強調其性別為男性（性別意識），因此為該詞標記本省人和男性兩種標籤。"
},
{
"keyword": "外省腔",
"labels": ["語言與族群-外省人"],
"reason": "「外省腔」是指外省人說話的口音，突顯其語言與族群的身份特徵，因此標註為外省人。"
}
]
"""

EXAMPLE_FOUR = """很奇怪他們都絕口不說「稀飯」而說粥，愛吃的「廣柑」就是柳丁。"""
RESPONSE_FOUR = """
[
{
"keyword": "廣柑",
"labels": ["語言與族群-外省人"],
"reason": "句中說明「廣柑」其實就是「柳丁」（橘子）——這是不同族群使用的詞彙差異。「廣柑」是外省／廣東籍人常用的稱呼。"
}
]
"""

EXAMPLE_FIVE = """戰爭末期毀於美軍轟炸。屬於你的記憶是中華婦女反共聯合會……"""
RESPONSE_FIVE = """
[
{
"keyword": "戰爭末期",
"labels": ["歷史背景-日據時期"],
"reason": "「戰爭末期毀於美軍轟炸」指的是二戰末期（日據時期末）的臺北遭遇美軍轟炸的歷史事件。這段敘述發生在日據時代的尾聲，故標註為日據時期的歷史背景。"
},
{
"keyword": "反共聯合會",
"labels": ["歷史背景-國共內戰"],
"reason": "提到「中華婦女反共聯合會」，這是國共內戰延伸出的臺灣社會產物，體現了國民黨對抗共產黨的意識形態宣傳。因此將此關鍵詞歸入國共內戰相關的歷史背景標籤。"
}
]
"""

EXAMPLE_SIX = """阿里薩正身體處於興奮狀態、心情又初戀似地愛上眼前這具女體時……"""
RESPONSE_SIX = """
[
{
"keyword": "初戀",
"labels": ["性別意識-青春情感"],
"reason": "片段中提到「心情又初戀似地」沉浸於愛意，這裡的「初戀」暗示年輕時純真的愛戀感受，屬於青春情感的範疇，因此將其標記為青春情感。"
},
{
"keyword": "女體",
"labels": ["性別意識-性與欲望"],
"reason": "「女體」指的是女性的身體，這裡強調了性別與欲望的關聯，故標註為性與欲望。"
}
]
"""

GENERATION_PROMPT = """{text}"""

default = [
    {"role": "user", "content": EXAMPLE_ONE},
    {"role": "assistant", "content": RESPONSE_ONE},
    {"role": "user", "content": EXAMPLE_TWO},
    {"role": "assistant", "content": RESPONSE_TWO},
    {"role": "user", "content": EXAMPLE_THREE},
    {"role": "assistant", "content": RESPONSE_THREE},
    {"role": "user", "content": EXAMPLE_FOUR},
    {"role": "assistant", "content": RESPONSE_FOUR},
    {"role": "user", "content": EXAMPLE_FIVE},
    {"role": "assistant", "content": RESPONSE_FIVE},
    {"role": "user", "content": EXAMPLE_SIX},
    {"role": "assistant", "content": RESPONSE_SIX},
]


def prompt_formatter(text):

    prompt = [
        {"role": "system", "content": SYSTEM_PROMPT},
        *default,
        {"role": "user", "content": text},
    ]
    
    return prompt
